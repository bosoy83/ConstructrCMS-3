<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constructr Administration</title>
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/css/constructr.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/css/materialize.min.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex-theme-wireframe.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
img.initialized{max-height:50px;max-width:auto;}
img.active{margin: 0 auto; height: 100%; max-height: 100%; width: 100%; max-width: 100%; border: 5px solid #fff;}
</style>
</head>
<body>
	<include href="{{ @NAVIGATION }}" />
	<form action="{{ @CONSTRUCTR_BASE_URL }}/constructr/uploads" method="get" enctype="application/x-www-form-urlencoded">
		<div class="row">
			<div class="input-field col s12">
				<i class="material-icons prefix">search</i>
				<input placeholder="Suchbegriff(e) getrennt durch Leerstellen eingeben und die Suche mit ENTER best&auml;tigen" name="needle" id="needle" type="text" value="{{ @ORIGIN_NEEDLE }}" required="required">
				<check if="{{ @ORIGIN_NEEDLE }} != ''">
					<true><label><a href="{{ @CONSTRUCTR_BASE_URL }}/constructr/uploads">Suche zur&uuml;cksetzen</a></label></true>
				</check>
			</div>
		</div>
	</form>
    <div class="row">
        <div class="col s12">
            <p><strong>{{ @FILES_COUNTR }} Uploads</strong>&#160;&#160;&#160;<input type="checkbox" id="pix" checked="checked" /> <label for="pix">Bilder</label>&#160;&#160;&#160;<input type="checkbox" id="files" checked="checked" /> <label for="files">Dateien</label>&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads/new" class="waves-effect waves-light btn">Neuer Upload +</a></p>
            <check if="{{ @NEW }} == 'success'">
				<div class="card-panel green darken-3 white-text">Die Datei wurde erfolgreich hochgeladen!</div>
            </check>
            <check if="{{ @NEW }} == 'no-success'">
				<div class="card-panel red darken-3 white-text">Die Datei konnte nicht hochgeladen werden!</div>
            </check>
            <check if="{{ @DELETE }} == 'success'">
				<div class="card-panel green darken-3 white-text">Die Datei wurde erfolgreich gel&ouml;scht!</div>
            </check>
            <check if="{{ @DELETE }} == 'no-success'">
				<div class="card-panel red darken-3 white-text">Die Datei konnte leider nicht gel&ouml;scht werden!</div>
            </check>
		</div>
	</div>
	<check if="{{ @PAGINATION_FILES }}">
		<true>
		    <table class="bordered hoverable" onmouseout="javascript:$('.tooltipped').tooltip('remove');">
		        <thead>
		            <tr>
		            <th data-field="Dateiname">Datei/Vorschau</th>
		            <th data-field="URL">Absolute URL</th>
		            <th data-field="Aktionen" class="center-align" style="width:125px">Aktionen</th>
		            </tr>
		        </thead>
		        <tbody>
		            <repeat group="{{ @PAGINATION_FILES }}" value="{{ @PAGINATION_FILE }}">
		            	<check if="{{ strrchr(@PAGINATION_FILE,'#') }} == '#true'">
		            		<true>
		            			<tr class="image_row">
		            		</true>
		            		<false>
		            			<tr class="file_row">
		            		</false>
		            	</check>
			            	<check if="{{ strrchr(@PAGINATION_FILE,'#') }} == '#true'">
			            		<true>
			            			<td><img class="materialboxed" src="{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ str_replace('#true','',@PAGINATION_FILE) }}" alt="{{ str_replace('#true','',@PAGINATION_FILE) }}" title="{{ str_replace('#true','',@PAGINATION_FILE) }}" style="margin-left: 25px;"></td>		
			            		</true>
			            		<false>
			            			<td>&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ str_replace('#false','',@PAGINATION_FILE) }}" target="_blank" class="tooltipped" data-position="right" data-delay="25" data-tooltip="Vorschau">{{ str_replace('#false','',@PAGINATION_FILE) }}</a></td>
			            		</false>
			            	</check>
			                <td><small>{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ str_replace('#false','',str_replace('#true','',@PAGINATION_FILE)) }}</small></td>
			                <td class="center-align"><nobr>
			                	<a href="{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ str_replace('#false','',str_replace('#true','',@PAGINATION_FILE)) }}" target="_blank" data-position="left" data-delay="25" data-tooltip="Vorschau in neuem Fenster" class="tooltipped"><i class="material-icons">open_in_new</i></a>
			                	&#160;
			                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads/delete/{{ str_replace('#false','',str_replace('#true','',@PAGINATION_FILE)) }}" data-position="left" data-delay="25" data-tooltip="Datei l&ouml;schen" class="deleter tooltipped"><i class="material-icons">delete</i></a>
			                </nobr></td>
			            </tr>
			        </repeat>
		    	</tbody>
			</table>
		</true>
	</check>
	<check if="{{ @SHOW_PAGINATION }} == 'true'">
		<true>
			<div class="row">
				<div class="col s12 center-align">
					{{ html_entity_decode(@PAGINATION_STRING) }}
				</div>
			</div>
		</true>
	</check>
	<div class="row"><div class="col s12 center-align"><p><small><a href="http://constructr-cms.org" target="_blank">ConstructrCMS Version {{ @CONSTRUCTR_VERSION }}</small></a></p></div></div>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/jquery/jquery-2.1.4.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/js/materialize.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/js/vex.combined.min.js"></script>
	<script>
		$(function(){
			$('#needle').select().focus();
			$('.materialboxed').materialbox();
			$(".button-collapse").sideNav();
			$('#pix').bind('click',function(){
				if($(this).prop("checked")==true){
					$('.image_row').show();
				}else{
					$('.image_row').hide();
				}
			});
			$('#files').bind('click',function(){
				if($(this).prop("checked")==true){
					$('.file_row').show();
				} else {
					$('.file_row').hide();
				}
			});
            $('.deleter').click(function(e){
				e.preventDefault();
	            var U=$(this).attr('href');
	            vex.dialog.buttons.YES.text='Ja';
	            vex.dialog.buttons.NO.text='Abbrechen';
	            vex.dialog.confirm({
	                className:'vex-theme-wireframe',
	                message:'<h5>Achtung:</h5>M&ouml;chten Sie diese Datei wirklich l&ouml;schen?',
	                callback:function(value){
	                    if(value==true){
	                        $(location).attr('href',U);
	                    } else {
	                        return false;
	                    }
	                }
	            });
            });
            function autoBlinder(){
                $('.card-panel').fadeOut();
            }
            setInterval(autoBlinder,4500);
		});
	</script>
</body>
</html>