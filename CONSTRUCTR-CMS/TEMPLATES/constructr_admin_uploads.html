<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constructr Administration</title>
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/css/constructr.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/css/materialize.min.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex-theme-default.css">
</head>
<body>
	<nav>
		<div class="nav-wrapper light-green lighten-1">
			<a href="#" data-activates="mobile" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
			<ul class="left hide-on-med-and-down">
				<li>&#160;&#160;&#160;</li>
				<li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Seitenverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement"><i class="mdi-action-dashboard"></i></a></li>
				<li class="active"><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Uploads" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads"><i class="mdi-file-cloud"></i></a></li>
				<li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Benutzerverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/usermanagement"><i class="mdi-communication-contacts"></i></a></li>
			</ul>
			<ul id="nav-mobile" class="right hide-on-med-and-down">
				<li><a class="tooltipped" data-position="left" data-delay="25" data-tooltip="Logout?" id="logout" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/logout"><i class="mdi-action-exit-to-app right"></i>{{ @SESSION.username }}</a></li>
			</ul>
			<ul class="side-nav" id="mobile">
				<li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Seitenverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement"><i class="mdi-action-dashboard"></i></a></li>
				<li class="active"><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Uploads" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads"><i class="mdi-file-cloud"></i></a></li>
				<li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Benutzerverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/usermanagement"><i class="mdi-communication-contacts"></i></a></li>
				<li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Logout?" id="logout" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/logout"><i class="mdi-action-exit-to-app right"></i>{{ @SESSION.username }}</a></li>
			</ul>
		</div>
	</nav>
    <div class="row">
        <div class="col s12">
            <p><strong>{{ @FILES_COUNTR }} Uploads&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads/new" class="waves-effect waves-light btn"><i class="mdi-content-add-circle right"></i>Neuer Upload</a></strong></p>
            <check if="{{ @NEW=='success' }}">
				<div class="card-panel green darken-3 white-text">Die Datei wurde erfolgreich hochgeladen!</div>
            </check>
            <check if="{{ @NEW=='no-success' }}">
				<div class="card-panel red darken-3 white-text">Die Datei konnte nicht hochgeladen werden!</div>
            </check>
            <check if="{{ @DELETE=='success' }}">
				<div class="card-panel green darken-3 white-text">Die Datei wurde erfolgreich gel&ouml;scht!</div>
            </check>
            <check if="{{ @DELETE=='no-success' }}">
				<div class="card-panel red darken-3 white-text">Die Datei konnte leider nicht gel&ouml;scht werden!</div>
            </check>
		</div>
	</div>
    <table class="bordered responsive-table hoverable">
        <thead>
            <tr>
            <th data-field="Dateiname">Datei</th>
            <th data-field="URL">Absolute URL</th>
            <th data-field="Aktionen" class="center-align">Aktionen</th>
            </tr>
        </thead>
        <tbody>
			<check if="{{ @IMAGES }}">
				<true>
		            <repeat group="{{ @IMAGES }}" value="{{ @IMAGE }}">
			            <tr>
			                <td><img src="{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ @IMAGE }}" alt="{{ @IMAGE }}" title="{{ @IMAGE }}" style="max-height: 50px;"></td>
			                <td>{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ @IMAGE }}</td>
			                <td class="center-align"><nobr>
			                	<a href="{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ @IMAGE }}" target="_blank" class="tooltipped lightbox" data-position="top" data-delay="25" data-tooltip="Vorschau in Lightbox"><i class="mdi-action-aspect-ratio"></i></a>
			                	&#160;
			                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads/delete/{{ @IMAGE }}" data-position="left" data-delay="25" data-tooltip="Datei ''{{ @IMAGE }}'' l&ouml;schen" class="deleter tooltipped waves-effect waves-light btn-small"><i class="mdi-action-delete"></i></a>
			                </nobr></td>
			            </tr>
			        </repeat>
				</true>
			</check>
			<check if="{{ @FILES }}">
				<true>
		            <repeat group="{{ @FILES }}" value="{{ @FILE }}">
			            <tr>
			                <td>{{ @FILE }}</td>
			                <td>{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ @FILE }}</td>
			                <td class="center-align"><nobr>
			                	<a href="{{ @CONSTRUCTR_BASE_URL }}/UPLOADS/{{ @FILE }}" target="_blank" data-position="left" data-delay="25" data-tooltip="Vorschau f&uuml;r Datei ''{{ @FILE }}''" class="tooltipped waves-effect waves-light btn-small"><i class="mdi-action-aspect-ratio"></i></a>
			                	&#160;
			                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads/delete/{{ @FILE }}" data-position="left" data-delay="25" data-tooltip="Datei ''{{ @FILE }}'' l&ouml;schen" class="deleter tooltipped waves-effect waves-light btn-small"><i class="mdi-action-delete"></i></a>
			                </nobr></td>
			            </tr>
			        </repeat>
				</true>
			</check>
	    </tbody>
	</table>
	<div class="row"><div class="col s12 center-align"><p><small><a href="http://phaziz.com" target="_blank">ConstructrCMS Version {{ @CONSTRUCTR_VERSION }}</small></a></p></div></div>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/jquery/jquery-2.1.4.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/js/materialize.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/imagelightbox/imagelightbox.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/js/vex.combined.min.js"></script>
	<script>
		$(function() {
			$(".button-collapse").sideNav();
			$('.lightbox').imageLightbox({
			    selector:'id="imagelightbox"',
			    allowedTypes:'png|jpg|jpeg|gif',
			    animationSpeed:100,
			    preloadNext:true,
			    enableKeyboard:true,
			    quitOnEnd:true,
			    quitOnImgClick:false,
			    quitOnDocClick:true,
			    onStart:false,
			    onEnd:false,
			    onLoadStart:false,
			    onLoadEnd:false
			});
            $('.deleter').click(function(e) {
				e.preventDefault();
	            var U = $(this).attr('href');
	            vex.dialog.buttons.YES.text = 'Ja';
	            vex.dialog.buttons.NO.text = 'Abbrechen';
	            vex.dialog.confirm({
	                className: 'vex-theme-default',
	                message: 'Möchten Sie diese Datei wirklich löschen?',
	                callback: function(value){
	                    if(value == true){
	                        $(location).attr('href',U);
	                    } else {
	                        return false;
	                    }
	                }
	            });
            });
            $(document).keyup(function(e) {
			    if (e.which === 27) javascript:history.back();
			});
            function autoBlinder(){
                $('.card-panel').fadeOut();
            }
            setInterval(autoBlinder,4500);
		});
	</script>
</body>
</html>