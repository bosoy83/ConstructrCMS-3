<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constructr Administration</title>
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/css/constructr.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/css/materialize.min.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex-theme-wireframe.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
	<include href="{{ @NAVIGATION }}" />
    <div class="row">
        <div class="col s12">
            <check if="{{ count(@PAGES) != 0 }}">
                <true>
                    <p><strong>{{ count(@PAGES) }} Seiten vorhanden</strong>&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/new" class="waves-effect waves-light btn">Neue Seite +</a></p>
                    <check if="{{ @EDIT }} =='success'">
						<div class="card-panel green darken-3 white-text">Die Seite wurde erfolgreich bearbeitet!</div>
                    </check>
                    <check if="{{ @EDIT }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Die Seite wurde leider nicht aktualisiert!</div>
                    </check>
                    <check if="{{ @EDIT }} == 'no-success-visibility-homepage'">
						<div class="card-panel red darken-3 white-text">Sichtbarkeit konnte nicht editiert werden - dies ist die Startseite!</div>
                    </check>                    
                    <check if="{{ @EDIT }} == 'no-success-url'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte nicht editiert werden - URL bereits vorhanden!</div>
                    </check>
                    <check if="{{ @EDIT }} == 'no-success-cnstrctr'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte nicht editiert werden - constructr ist eine gesch&uuml;tze URL f&uuml;r die Administration!</div>
                    </check>
                    <check if="{{ @NEW }} == 'success'">
						<div class="card-panel green darken-3 white-text">Die Seite wurde erfolgreich erstellt!</div>
                    </check>
                    <check if="{{ @NEW }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte leider nicht erstellt werden!</div>
                    </check>
                    <check if="{{ @NEW }} == 'no-success-url'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte nicht erstellt werden - URL bereits vorhanden!</div>
                    </check>
                    <check if="{{ @NEW }} == 'no-success-cnstrctr'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte nicht erstellt werden - constructr ist eine gesch&uuml;tze URL f&uuml;r die Administration!</div>
                    </check>
                    <check if="{{ @DELETE }} == 'success'">
						<div class="card-panel green darken-3 white-text">Die Seite wurde erfolgreich gel&ouml;scht!</div>
                    </check>
                    <check if="{{ @DELETE }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte leider nicht gel&ouml;scht werden!</div>
                    </check>
                    <check if="{{ @DELETE }} == 'no-success-content-available'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte leider nicht gel&ouml;scht werden - Es sind noch Inhalte vorhanden!</div>
                    </check>
                    <check if="{{ @DELETE }} == 'no-success-is-homepage'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte leider nicht gel&ouml;scht werden - Es ist die Startseite!</div>
                    </check>
                    <check if="{{ @MOVE }} == 'success'">
						<div class="card-panel green darken-3 white-text">Die Seite wurde erfolgreich verschoben!</div>
                    </check>
                    <check if="{{ @MOVE }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte leider nicht verschoben werden!</div>
                    </check>
                    <check if="{{ @MOVE }} == 'no-success-homepage'">
						<div class="card-panel red darken-3 white-text">Die Seite konnte leider nicht verschoben werden - Startseite darf nicht &uuml;berschrieben werden!</div>
                    </check>                    
                    <table class="bordered responsive-table hoverable" onmouseout="javascript:$('.tooltipped').tooltip('remove');">
                        <thead>
                            <tr>
                            <th data-field="Name">Name</th>
                            <th data-field="Name">ID</th>
                            <th data-field="URL">URL/Webadresse</th>
                            <th data-field="Template">Template</th>
                            <th data-field="Aktionen" class="center-align" style="width:250px;">Aktionen</th>
                            </tr>
                        </thead>
                        <tbody>
                            <repeat group="{{ @PAGES }}" value="{{ @PAGE }}">
                            <tr id="page_id_{{ @PAGE.constructr_pages_id }}">
                                <td class="tooltipped pages" data-position="right" data-delay="25" data-tooltip="Doppelklick um Seite ''ID {{ @PAGE.constructr_pages_id }}'' zu bearbeiten" id="page_id_@@@{{ @PAGE.constructr_pages_id }}">
                                    <check if="{{ @PAGE.constructr_pages_level }} > 1">
                                        <true>
                                            {{ @levelIndicator(@PAGE.constructr_pages_level) }}
                                        </true>
                                    </check>
                                    <a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE.constructr_pages_id }}" data-position="right" data-delay="25" data-tooltip="Inhalte von Seite ''{{ @PAGE.constructr_pages_name }}'' bearbeiten" class="tooltipped">{{ @PAGE.constructr_pages_name }}</a>
                                </td>
                            	<td><small>{{ @PAGE.constructr_pages_id }}</small></td>
                                <td><a href="{{ @CONSTRUCTR_BASE_URL }}/{{ @PAGE.constructr_pages_url }}" target="_blank" data-position="top" data-delay="25" data-tooltip="Vorschau von Seite ''{{ @PAGE.constructr_pages_name }}''" class="tooltipped"><small>{{ @CONSTRUCTR_BASE_URL }}/{{ @PAGE.constructr_pages_url }}</small></a>
                                </td>
                                <td><small>{{ @PAGE.constructr_pages_template }}</small></td>
                                <td class="center-align"><nobr>
									<check if="{{ @PAGE.constructr_pages_order }} == 1">
										<false>
		                                	&#160;
		                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/move-up/{{ @PAGE.constructr_pages_id }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' nach oben verschieben" class="tooltipped"><i class="material-icons">arrow_drop_up</i></a>
										</false>
										<true>
											&#160;&#160;&#160;&#160;&#160;&#160;&#160;
										</true>
									</check>
									<check if="{{ @PAGE.constructr_pages_order }} == {{ count(@PAGES) }}">
										<false>
		                                	&#160;
		                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/move-down/{{ @PAGE.constructr_pages_id }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' nach unten verschieben" class="tooltipped"><i class="material-icons">arrow_drop_down</i></a>
										</false>
										<true>
											&#160;&#160;&#160;&#160;&#160;&#160;&#160;
										</true>
									</check>
									&#160;
									<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE.constructr_pages_id }}" data-position="left" data-delay="25" data-tooltip="Inhalte von Seite ''{{ @PAGE.constructr_pages_name }}'' bearbeiten" class="tooltipped"><i class="material-icons">format_align_justify</i></a>
                                	&#160;
                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/edit/{{ @PAGE.constructr_pages_id }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' bearbeiten" class="tooltipped"><i class="material-icons">mode_edit</i></a>
                                	&#160;
									<check if="{{ @PAGE.constructr_pages_nav_visible }} == 1">
										<false>
		                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/visibility/on/{{ @PAGE.constructr_pages_id }}/{{ @PAGE.constructr_pages_order }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' in Navigation zeigen" class="tooltipped"><i class="material-icons">filter_tilt_shift</i></a>
										</false>
										<true>
											<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/visibility/off/{{ @PAGE.constructr_pages_id }}/{{ @PAGE.constructr_pages_order }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' in Navigation verbergen" class="tooltipped"><i class="material-icons">adjust</i></a>
										</true>
									</check>
									&#160;
                                	<a href="{{ @CONSTRUCTR_BASE_URL }}/{{ @PAGE.constructr_pages_url }}" target="_blank" data-position="left" data-delay="25" data-tooltip="Vorschau von Seite ''{{ @PAGE.constructr_pages_name }}''" class="tooltipped"><i class="material-icons">open_in_new</i></a>
                                	&#160;
                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/delete/{{ @PAGE.constructr_pages_id }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' l&ouml;schen" class="deleter tooltipped"><i class="material-icons">delete</i></a>
                                	&#160;
                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/deletewithcontent/{{ @PAGE.constructr_pages_id }}" data-position="left" data-delay="25" data-tooltip="Seite ''{{ @PAGE.constructr_pages_name }}'' inklusive Inhalte l&ouml;schen" class="deleterC tooltipped"><i class="material-icons">cancel</i></a>
                                </nobr></td>
                            </tr>
                        </repeat>
                        </tbody>
                    </table>
                </true>
                <false>
                    <p><strong>{{ count(@PAGES) }} Seiten vorhanden</strong>&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/new" class="waves-effect waves-light btn">Neue Seite +</a></p>
                </false>
            </check>
        </div>
    </div>
	<div class="row"><div class="col s12 center-align"><p><small><a href="http://phaziz.com" target="_blank">ConstructrCMS Version {{ @CONSTRUCTR_VERSION }}</small></a></p></div></div>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/jquery/jquery-2.1.4.min.js"></script>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/js/materialize.min.js"></script>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/js/vex.combined.min.js"></script>
    <script>
        $(function(){
        	$(".button-collapse").sideNav();
            $('.pages').dblclick(function(){
				var INFO=$(this).attr('id');
				INFO=INFO.split('@@@');
            	var PAGE_ID=INFO[1];
            	window.location='{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement/edit/'+PAGE_ID;
            });
            $('.deleterC').click(function(e) {
				e.preventDefault();
	            var U=$(this).attr('href');
	            vex.dialog.buttons.YES.text='Ja';
	            vex.dialog.buttons.NO.text='Abbrechen';
	            vex.dialog.confirm({
	                className:'vex-theme-wireframe',
	                message:'<h5>Achtung:</h5>M&ouml;chten Sie diese Seite wirklich inklusive aller Inhalte l&ouml;schen?',
	                callback:function(value){
	                    if(value==true){
	                        $(location).attr('href',U);
	                    } else {
	                        return false;
	                    }
	                }
	            });
            });
            $('.deleter').click(function(e){
				e.preventDefault();
	            var U=$(this).attr('href');
	            vex.dialog.buttons.YES.text='Ja';
	            vex.dialog.buttons.NO.text='Abbrechen';
	            vex.dialog.confirm({
	                className:'vex-theme-wireframe',
	                message:'<h5>Achtung:</h5>M&ouml;chten Sie diese Seite wirklich l&ouml;schen?',
	                callback:function(value){
	                    if(value==true){
	                        $(location).attr('href',U);
	                    } else {
	                        return false;
	                    }
	                }
	            });
            });
            function autoBlinder(){
                $('.card-panel').fadeOut();
            }
            setInterval(autoBlinder,4500);
        });
    </script>
</body>
</html>
