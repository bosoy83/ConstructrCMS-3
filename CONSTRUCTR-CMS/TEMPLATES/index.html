<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constructr Login</title>
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/css/constructr.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/css/materialize.min.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex-theme-wireframe.css">
</head>
<body>
	<div class="container" style="margin-top:150px;">
		<h5>Bitte Benutzername eingeben</h5>
		<div class="row form-row">
			<form name="login" id="login" action="{{ @CONSTRUCTR_BASE_URL}}/constructr/login" method="post" enctype="application/x-www-form-urlencoded" class="col s12">
				<input type="hidden" name="csrf" value="{{ @CSRF }}">
				<input type="hidden" name="csrf_additive" value="{{ @ADDITIVE }}">
				<input type="hidden" name="csrf_tripple_additive" value="{{ @TRIPPLE_ADDITIVE }}">
				<div class="input-field col s12">
					<input type="text" id="username" name="username" value="" placeholder="Benutzername" required="required" autofocus="autofocus">
					<label for="icon_prefix">Benutzername:</label>
				</div>
				<div class="input-field col s12 ghost">
					<input type="text" id="email" name="email" value="" placeholder="eMail">
					<label for="icon_prefix">eMail:</label>
				</div>
				<div class="input-field col s6">
					<button class="btn waves-effect waves-light grey darken-4" type="submit" name="action">&#160;&#160;&#160;Login Schritt 1 von 2&#160;&#160;&#160;</button>
				</div>
				<div class="input-field col s6">
					<p class="right-align"><small><a id="retrieve_password" href="#">Passwort vergessen?</a></small></p>
				</div>
			</form>
		</div>
	</div>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/jquery/jquery-2.1.4.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/js/materialize.min.js"></script>
	<script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/js/vex.combined.min.js"></script>
	<script>
		$(function() {
			$("#username").focus();
			$('#retrieve_password').click(function() {
				$("#username").focus();
				var A=$('#username').val();
				if(typeof A==='undefined' || A=='') {
					$('#username').focus();
	                vex.dialog.buttons.YES.text='Okay';
	                vex.dialog.alert({
	                    className:'vex-theme-wireframe',
	                    message:'<h5>Achtung:</h5>Bitte das Feld Benutzername ausf&uuml;llen!',
	                });
					return false;
				} else {
	                vex.dialog.buttons.YES.text='Ja';
	                vex.dialog.buttons.NO.text='Abbrechen';
	                vex.dialog.confirm({
	                    className:'vex-theme-wireframe',
	                    message:'<h5>Achtung:</h5>M&ouml;chten Sie wirklich das Passwort f&uuml;r Benutzer '+A+' zur&uuml;cksetzen?',
	                    callback:function(value){
	                        if(value==true){
	                            $(location).attr('href','{{ @CONSTRUCTR_BASE_URL}}/constructr/retrieve-password/'+A);
	                        } else {
	                            return false;
	                        }
	                    }
	                });
				}
			});
            function autoBlinder(){
                $('.card-panel').fadeOut();
            }
            setInterval(autoBlinder,4500);
			$('#login').bind('submit',function() {
				var A=$('#username').val();
				var E=$('#email').val();
				if(typeof A==='undefined' || A=='' || E!='') {
					return false;
				}
			});
		});
	</script>
</body>
</html>