<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constructr Administration</title>
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/css/constructr.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/css/materialize.min.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/css/vex-theme-wireframe.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
	<include href="{{ @NAVIGATION }}" />
    <div class="row">
        <div class="col s12">
            <check if="{{ @CONTENT_COUNTR }} != 0">
                <true>
                    <p><strong>{{ @CONTENT_COUNTR }} Inhalte auf Seite <a class="tooltipped" data-position="tpo" data-delay="25" data-tooltip="Seite im Browser zeigen" href="{{ @CONSTRUCTR_BASE_URL }}/{{ @PAGE.0.constructr_pages_url }}" target="_blank">''{{ @PAGE.0.constructr_pages_name }}''</a> vorhanden</strong>&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/new" class="waves-effect waves-light btn">Neuer Inhalt +</a></p>
                    <check if="{{ @EDIT }} == 'success'">
						<div class="card-panel green darken-3 white-text">Der Inhalt wurde erfolgreich bearbeitet!</div>
                    </check>
                    <check if="{{ @EDIT }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Der Inhalt wurde leider nicht aktualisiert!</div>
                    </check>
                    <check if="{{ @NEW }} == 'success'">
						<div class="card-panel green darken-3 white-text">Der Inhalt wurde erfolgreich erstellt!</div>
                    </check>
                    <check if="{{ @NEW }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Der Inhalt konnte leider nicht erstellt werden!</div>
                    </check>
                    <check if="{{ @DELETE }} == 'success'">
						<div class="card-panel green darken-3 white-text">Der Inhalt wurde erfolgreich gel&ouml;scht!</div>
                    </check>
                    <check if="{{ @DELETE }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Der Inhalt konnte leider nicht gel&ouml;scht werden!</div>
                    </check>
                    <check if="{{ @MOVE }} == 'success'">
						<div class="card-panel green darken-3 white-text">Der Inhalt wurde erfolgreich verschoben!</div>
                    </check>
                    <check if="{{ @MOVE }} == 'no-success'">
						<div class="card-panel red darken-3 white-text">Der Inhalt konnte leider nicht verschoben werden!</div>
                    </check>
					<div class="col s12">
						<input type="checkbox" id="shower" /> <label for="shower">Vorschau anzeigen</label>
					</div>
					<br><br>
                    <table class="bordered hoverable" onmouseout="javascript:$('.tooltipped').tooltip('remove');">
                        <thead>
                            <tr>
                            <th data-field="Inhalt">Inhalt</th>
                            <th data-field="Vorschau" class="show" style="display:none;">Vorschau</th>
                            <th data-field="Aktionen" class="center-align" style="width:150px">Aktionen</th>
                            </tr>
                        </thead>
                        <tbody>
                            <repeat group="{{ @CONTENT }}" value="{{ @CONTENT }}">
                            <tr>
                                <td class="tooltipped content" data-position="top" data-delay="25" data-tooltip="Doppelklick um Inhalt ''ID {{ @CONTENT.constructr_content_id }}'' zu bearbeiten" id="content_id_@@@{{ @CONTENT.constructr_content_id }}">
                                	<check if="{{ @CONTENT.constructr_content_tpl_id_mapping }} != ''">
                                		<true>
                                			<strong><small>{{ @CONTENT.constructr_content_tpl_id_mapping }}</small></strong><br>
                                		</true>
                                	</check>
                                	<small>{{ @CONTENT.constructr_content_content_html }}</small>
                            	</td>
                            	<td class="show" style="display:none;">
                            		{{ html_entity_decode(@CONTENT.constructr_content_content_html) }}
                            	</td>
                                <td class="center-align"><nobr>
									<check if="{{ @CONTENT.constructr_content_order }} == 1">
										<false>
		                                	&#160;
		                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/reorder/up/{{ @CONTENT.constructr_content_id }}" data-position="left" data-delay="25" data-tooltip="Inhalt ''ID {{ @CONTENT.constructr_content_id }}'' nach oben verschieben" class="tooltipped"><i class="material-icons">arrow_drop_up</i></a>
										</false>
										<true>
											&#160;&#160;&#160;&#160;&#160;&#160;&#160;
										</true>
									</check>
									<check if="{{ @CONTENT.constructr_content_order }} == {{ @CONTENT_COUNTR }}">
										<false>
		                                	&#160;
		                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/reorder/down/{{ @CONTENT.constructr_content_id }}" data-position="left" data-delay="25" data-tooltip="Inhalt ''ID {{ @CONTENT.constructr_content_id }}'' nach unten verschieben" class="tooltipped"><i class="material-icons">arrow_drop_down</i></a>
										</false>
										<true>
											&#160;&#160;&#160;&#160;&#160;&#160;&#160;
										</true>
									</check>
									&#160;
									<check if="{{ @CONTENT.constructr_content_visible }} == 1">
										<false>
		                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/visibility/on/{{ @CONTENT.constructr_content_id }}" data-position="left" data-delay="25" data-tooltip="Inhalt ''{{ @CONTENT.constructr_content_id }}'' zeigen" class="tooltipped"><i class="material-icons">visibility_off</i></a>
										</false>
										<true>
											<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/visibility/off/{{ @CONTENT.constructr_content_id }}" data-position="left" data-delay="25" data-tooltip="Inhalt ''{{ @CONTENT.constructr_content_id }}'' verbergen" class="tooltipped"><i class="material-icons">visibility</i></a>
										</true>
									</check>
									&#160;
									<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/edit/{{ @CONTENT.constructr_content_id }}" data-position="left" data-delay="25" data-tooltip="Inhalt ''ID {{ @CONTENT.constructr_content_id }}'' bearbeiten" class="tooltipped"><i class="material-icons">mode_edit</i></a>
                                	&#160;
                                	<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/delete/{{ @CONTENT.constructr_content_id }}" data-position="left" data-delay="25" data-tooltip="Inhalt ''ID {{ @CONTENT.constructr_content_id }}'' l&ouml;schen" class="deleter tooltipped"><i class="material-icons">delete</i></a>
                                &#160;&#160;&#160;</nobr></td>
                            </tr>
                        </repeat>
                        </tbody>
                    </table>
                </true>
                <false>
					<p><strong>0 Inhalte auf Seite <a class="tooltipped" data-position="tpo" data-delay="25" data-tooltip="Seite im Browser zeigen" href="{{ @CONSTRUCTR_BASE_URL }}/{{ @PAGE.0.constructr_pages_url }}" target="_blank">''{{ @PAGE.0.constructr_pages_name }}''</a> vorhanden</strong>&#160;&#160;&#160;<a href="{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/new" class="waves-effect waves-light btn">Neuer Inhalt +</a></p>
                </false>
            </check>
            <p><small>Taste ''ESC'' drücken um zur Seitenverwaltung zurückzugehen</small></p>
        </div>
    </div>
	<div class="row"><div class="col s12 center-align"><p><small><a href="http://phaziz.com" target="_blank">ConstructrCMS Version {{ @CONSTRUCTR_VERSION }}</small></a></p></div></div>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/jquery/jquery-2.1.4.min.js"></script>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/js/materialize.min.js"></script>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/vex/js/vex.combined.min.js"></script>
    <script>
        $(function() {
        	$(".button-collapse").sideNav();
        	$('#shower').bind('click',function(){
				if($(this).prop("checked") == true){
					$('.show').show();
				} else {
					$('.show').hide();
				}
        	});
            $('.deleter').click(function(e) {
                e.preventDefault();
                var U = $(this).attr('href');
                vex.dialog.buttons.YES.text = 'Ja';
                vex.dialog.buttons.NO.text = 'Abbrechen';
                vex.dialog.confirm({
                    className: 'vex-theme-wireframe',
                    message: '<h5>Achtung:</h5>M&ouml;chten Sie diesen Inhalt wirklich l&ouml;schen?',
                    callback: function(value){
                        if(value == true){
                            window.location = (U);
                        } else {
                            return false;
                        }
                    }
                });
            });
            $('.content').dblclick(function(){
				var INFO = $(this).attr('id');
				INFO = INFO.split('@@@');
            	var CONTENT_ID = INFO[1];
            	window.location = '{{ @CONSTRUCTR_BASE_URL}}/constructr/content/{{ @PAGE_ID }}/edit/' + CONTENT_ID;
            });
            $(document).keyup(function(e){
			    if (e.which === 27) javascript:history.back();
			});
            function autoBlinder(){
                $('.card-panel').fadeOut();
            }
            setInterval(autoBlinder,4500);
        });
    </script>
</body>
</html>
