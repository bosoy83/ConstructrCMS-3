<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constructr Administration</title>
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/css/constructr.css">
<link rel="stylesheet" href="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/css/materialize.min.css">
</head>
<body>
    <nav>
        <div class="nav-wrapper light-green lighten-1">
            <a href="#" data-activates="mobile" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
            <ul class="left hide-on-med-and-down">
                <li>&#160;&#160;&#160;</li>
                <li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Seitenverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement"><i class="mdi-action-dashboard"></i></a></li>
                <li class="active"><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Uploads" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads"><i class="mdi-file-cloud"></i></a></li>
                <li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Benutzerverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/usermanagement"><i class="mdi-communication-contacts"></i></a></li>
            </ul>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a class="tooltipped" data-position="left" data-delay="25" data-tooltip="Logout?" id="logout" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/logout"><i class="mdi-action-exit-to-app right"></i>{{ @SESSION.username }}</a></li>
            </ul>
            <ul class="side-nav" id="mobile">
                <li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Seitenverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/pagemanagement"><i class="mdi-action-dashboard"></i></a></li>
                <li class="active"><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Uploads" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads"><i class="mdi-file-cloud"></i></a></li>
                <li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Benutzerverwaltung" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/usermanagement"><i class="mdi-communication-contacts"></i></a></li>
                <li><a class="tooltipped" data-position="right" data-delay="25" data-tooltip="Logout?" id="logout" href="{{ @CONSTRUCTR_BASE_URL}}/constructr/logout"><i class="mdi-action-exit-to-app right"></i>{{ @SESSION.username }}</a></li>
            </ul>
        </div>
    </nav>
    <div class="row">
        <div class="col s12">
            <p><strong>Neuer Upload</strong></p>
        </div>
    </div>
    <div class="row">
        <form name="new_upload" id="new_upload" action="{{ @CONSTRUCTR_BASE_URL}}/constructr/uploads/new" method="post" enctype="multipart/form-data" class="col s12">
            <input type="hidden" name="csrf" value="{{ @CSRF }}">
            <input type="hidden" name="csrf_additive" value="{{ @ADDITIVE }}">
            <input type="hidden" name="csrf_tripple_additive" value="{{ @TRIPPLE_ADDITIVE }}">
			<div class="file-field input-field">
				<input class="file-path validate" type="text"/>
				<div class="btn">
					<span><i class="mdi-content-add-circle"></i></span>
					<input type="file" name="new_file" id="new_file" autofocus required="required">
				</div>
			</div>
            <div class="input-field col s12" id="preview" style="overflow:hidden;text-align:center;">
            </div>
            <div class="input-field col s12">
                <button class="btn waves-effect waves-light" type="submit" name="action">Datei hochladen</button>
                <p><small>Taste <strong>''ESC''</strong> zum abbrechen dr&uuml;cken</small></p>
            </div>
        </form>
    </div>
	<div class="row"><div class="col s12 center-align"><p><small><a href="http://phaziz.com" target="_blank">ConstructrCMS Version {{ @CONSTRUCTR_VERSION }}</small></a></p></div></div>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/jquery/jquery-2.1.4.min.js"></script>
    <script src="{{ @CONSTRUCTR_BASE_URL}}/CONSTRUCTR-CMS/ASSETS/materialize/js/materialize.min.js"></script>
    <script>
        $(function() {
        	$(".button-collapse").sideNav();
			$(document).keyup(function(e) {
			    if (e.which === 27) javascript:history.back();
			});
        	$('#new_file').focus();
		    $('#new_file').change(function(e) {
		    	$('#preview').html('');
		        if (this.files !== 'undefined' && typeof FileReader !== 'undefined') {
		            for (var f = 0; f < this.files.length; f++) {
		                var file = this.files[f];
		                var reader = new FileReader();
		                if (!/image\/(jpeg|jpg|png|gif)/.test(file.type)) {
		                    continue;
		                }
		                $(reader).load(previewImage);
		                reader.readAsDataURL(file);
		            }
		        }
		    });
			function previewImage(e) {
			    var img = $(document.createElement('img'));
			    $(img).attr('src', e.target.result);
			    $('#preview').append(img);
			}
            function autoBlinder(){
                $('.card-panel').fadeOut();
            }
            setInterval(autoBlinder,4500);
        });
    </script>
</body>
</html>
